!function(e){function t(t){for(var a,n,o=t[0],l=t[1],d=t[2],h=0,p=[];h<o.length;h++)n=o[h],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(c&&c(t);p.length;)p.shift()();return r.push.apply(r,d||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},i={1:0},r=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=l;r.push([14,0,2]),s()}({14:function(e,t,s){e.exports=s(40)},40:function(e,t,s){"use strict";s.r(t);s(15);var a=s(0);var i=[function(e,t,s){return".center"+t+"{text-align:center}.link"+t+"{border:none;padding:10px;border-radius:5px;text-decoration:none;background-color:#ff6000;color:#fff;margin-left:33%;margin-right:33%;display:inline-block;margin-top:1em}.info"+t+"{color:#000;background-color:#e4f2f8;margin:auto;padding:15px 10px;text-align:left;width:300px;border-radius:5px}.code"+t+"{font-family:monospace;font-size:large}.container"+t+"{margin-top:30px}img"+t+"{max-width:150px}.greeting"+t+"{height:75px}"}];var r=[function(e,t,s){return(s?":host{font-family:Ropa Sans,sans-serif;color:#333;max-width:640px;margin:0 auto;position:relative}":e+"{font-family:Ropa Sans,sans-serif;color:#333;max-width:640px;margin:0 auto;position:relative}")+".loadingMessage"+t+"{text-align:center;padding:40px;background-color:#eee}.canvas"+t+"{width:100%}.output"+t+"{margin-top:20px;background:#eee;padding:10px;padding-bottom:0}.outputDiv"+t+"{padding-bottom:10px;word-wrap:break-word}.noQRFound"+t+"{text-align:center}"}];function n(e,t,s,a){const{h:i,t:r}=e;return[i("div",{classMap:{"slds-grid":!0,"slds-wrap":!0,"slds-grid_align-center":!0},key:10},[i("div",{classMap:{"slds-col":!0,"slds-size_1-of-1":!0,"slds-medium-size_2-of-12":!0,"slds-large-size_3-of-12":!0},key:0},[]),i("div",{classMap:{"slds-col":!0,"slds-size_1-of-1":!0,"slds-medium-size_8-of-12":!0,"slds-large-size_6-of-12":!0},key:8},[i("div",{classMap:{loadingMessage:!0},attrs:{"data-id":"loadingMessage"},key:1},[r("ðŸŽ¥ Unable to access video stream (please make sure you have a webcam enabled)")]),i("canvas",{classMap:{canvas:!0},attrs:{"data-id":"canvas"},props:{hidden:!0},key:2},[]),i("div",{classMap:{output:!0},attrs:{"data-id":"output"},props:{hidden:!0},key:7},[i("div",{classMap:{outputDiv:!0,noQRFound:!0},attrs:{"data-id":"outputMessage"},key:3},[r("No QR code detected.")]),i("div",{classMap:{outputDiv:!0},props:{hidden:!0},key:6},[i("b",{key:4},[r("Data:")]),i("span",{attrs:{"data-id":"outputData"},key:5},[])])])]),i("div",{classMap:{"slds-col":!0,"slds-size_1-of-1":!0,"slds-medium-size_2-of-12":!0,"slds-large-size_3-of-12":!0},key:9},[])])]}var o=Object(a.registerTemplate)(n);n.stylesheets=[],r&&n.stylesheets.push.apply(n.stylesheets,r),n.stylesheetTokens={hostAttribute:"my-qrCodeScanner-_qrCodeScanner-host",shadowAttribute:"my-qrCodeScanner-_qrCodeScanner"};var l=s(12),d=s.n(l);class c extends a.LightningElement{constructor(...e){super(...e),this.vars=null,this._isVisible=!1}get isVisible(){return this._isVisible}set isVisible(e){this._isVisible=e,this._isVisible&&window.requestAnimationFrame(()=>{this._tick()})}renderedCallback(){this.vars||(this.vars={},this.vars.video=document.createElement("video"),this.vars.canvasElement=this.template.querySelector("[data-id=canvas]"),this.vars.canvas=this.vars.canvasElement.getContext("2d"),this.vars.loadingMessage=this.template.querySelector("[data-id=loadingMessage]"),this.vars.outputContainer=this.template.querySelector("[data-id=output]"),this.vars.outputMessage=this.template.querySelector("[data-id=outputMessage]"),this.vars.outputData=this.template.querySelector("[data-id=outputData]"),navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(e=>{this.vars.video.srcObject=e,this.vars.video.setAttribute("playsinline",!0),this.vars.video.play(),window.requestAnimationFrame(()=>{this._tick()})}))}_tick(){if(this.isVisible){if(this.vars.loadingMessage.innerText="âŒ› Loading video...",this.vars.video.readyState===this.vars.video.HAVE_ENOUGH_DATA){console.log("Scanning"),this.vars.loadingMessage.hidden=!0,this.vars.canvasElement.hidden=!1,this.vars.outputContainer.hidden=!1,this.vars.canvasElement.height=this.vars.video.videoHeight,this.vars.canvasElement.width=this.vars.video.videoWidth,this.vars.canvas.drawImage(this.vars.video,0,0,this.vars.canvasElement.width,this.vars.canvasElement.height);let e=this.vars.canvas.getImageData(0,0,this.vars.canvasElement.width,this.vars.canvasElement.height),t=d()(e.data,e.width,e.height,{inversionAttempts:"dontInvert"});t&&(this._drawLine(t.location.topLeftCorner,t.location.topRightCorner,"#FF3B58"),this._drawLine(t.location.topRightCorner,t.location.bottomRightCorner,"#FF3B58"),this._drawLine(t.location.bottomRightCorner,t.location.bottomLeftCorner,"#FF3B58"),this._drawLine(t.location.bottomLeftCorner,t.location.topLeftCorner,"#FF3B58"),this.vars.outputMessage.hidden=!0,this.vars.outputData.parentElement.hidden=!1,this.vars.outputData.innerText=t.data)}window.requestAnimationFrame(()=>{this._tick()})}}_drawLine(e,t,s){this.vars.canvas.beginPath(),this.vars.canvas.moveTo(e.x,e.y),this.vars.canvas.lineTo(t.x,t.y),this.vars.canvas.lineWidth=4,this.vars.canvas.strokeStyle=s,this.vars.canvas.stroke()}}Object(a.registerDecorators)(c,{publicProps:{isVisible:{config:3}},fields:["vars","_isVisible"]});var h=Object(a.registerComponent)(c,{tmpl:o}),p=s(6),u=s.n(p);function g(e,t,s,a){const{h:i}=e;return[i("div",{classMap:{"slds-grid":!0,"slds-wrap":!0,"slds-grid_align-center":!0},styleMap:{height:"100%"},key:2},[i("div",{classMap:{"slds-col":!0,"slds-size_1-of-1":!0,"slds-align_absolute-center":!0},key:1},[i("canvas",{attrs:{"data-id":"QRCode"},key:0},[])])])]}var v=Object(a.registerTemplate)(g);g.stylesheets=[],u.a&&g.stylesheets.push.apply(g.stylesheets,u.a),g.stylesheetTokens={hostAttribute:"my-qrCodeGenerator-_qrCodeGenerator-host",shadowAttribute:"my-qrCodeGenerator-_qrCodeGenerator"};var b=s(13),m=s.n(b);class y extends a.LightningElement{constructor(){super(),this.isVisible=!1,setInterval(()=>{this.isVisible&&this.generateQR()},1e3)}generateQR(){const e=this.template.querySelector('[data-id="QRCode"]'),t=JSON.stringify((new Date).toJSON());m.a.toCanvas(e,t,{margin:0,width:.9*Math.min(window.innerWidth,window.innerHeight)}).then(()=>{console.log("Generated QR!")}).catch(e=>{throw Error(e)})}}Object(a.registerDecorators)(y,{publicProps:{isVisible:{config:0}}});var f=Object(a.registerComponent)(y,{tmpl:v});function _(e,t,s,a){const{t:i,b:r,h:n,c:o,gid:l}=e,{_m0:d,_m1:c}=a;return[n("div",{classMap:{"slds-tabs_default":!0,"slds-tabs_large":!0},key:7},[n("ul",{classMap:{"slds-tabs_default__nav":!0},attrs:{role:"tablist"},key:2},[n("li",{classMap:{"slds-tabs_default__item":!0},attrs:{"data-id":"tabScanner"},key:0,on:{click:d||(a._m0=r(t.showScanner))}},[i("Scanner")]),n("li",{classMap:{"slds-tabs_default__item":!0},attrs:{"data-id":"tabGenerator"},key:1,on:{click:c||(a._m1=r(t.showGenerator))}},[i("Generator")])]),n("div",{classMap:{"slds-tabs_default__content":!0,"slds-hide":!0},attrs:{id:l("tab-default-1"),"data-id":"pageScanner"},key:4},[o("my-qr-code-scanner",h,{props:{isVisible:t.isScannerVisible},key:3},[])]),n("div",{classMap:{"slds-tabs_default__content":!0,"slds-hide":!0},attrs:{id:l("tab-default-2"),"data-id":"pageGenerator"},key:6},[o("my-qr-code-generator",f,{props:{isVisible:t.isGeneratorVisible},key:5},[])])]),i("v2.0")]}var w=Object(a.registerTemplate)(_);_.stylesheets=[],i&&_.stylesheets.push.apply(_.stylesheets,i),_.stylesheetTokens={hostAttribute:"my-app-_app-host",shadowAttribute:"my-app-_app"};class k extends a.LightningElement{constructor(){super(),this._initialized=!1,this.pageVisibility={},this.pageVisibility={scanner:!1,generator:!1}}renderedCallback(){this._initialized||(this._initialized=!0,this._switchPage("scanner"))}get isScannerVisible(){return this.pageVisibility.scanner}get isGeneratorVisible(){return this.pageVisibility.generator}showScanner(){this._switchPage("scanner")}showGenerator(){this._switchPage("generator")}_getDOM(){return{tabs:{scanner:this.template.querySelector('[data-id="tabScanner"]'),generator:this.template.querySelector('[data-id="tabGenerator"]')},pages:{scanner:this.template.querySelector('[data-id="pageScanner"]'),generator:this.template.querySelector('[data-id="pageGenerator"]')}}}_switchPage(e){let t=this._getDOM();Object.keys(this.pageVisibility).forEach(t=>{this.pageVisibility[t]=t===e}),Object.keys(t.tabs).forEach(s=>{s===e?t.tabs[s].classList.add("slds-is-active"):t.tabs[s].classList.remove("slds-is-active")}),Object.keys(t.pages).forEach(s=>{s===e?(t.pages[s].classList.add("slds-show"),t.pages[s].classList.remove("slds-hide")):(t.pages[s].classList.remove("slds-show"),t.pages[s].classList.add("slds-hide"))})}}Object(a.registerDecorators)(k,{track:{pageVisibility:1},fields:["_initialized"]});var M=Object(a.registerComponent)(k,{tmpl:w});customElements.define("my-app",Object(a.buildCustomElementConstructor)(M))}});